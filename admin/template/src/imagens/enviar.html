<script type="text/javascript" src="../core/FancyUpload/Swiff.Uploader.js"></script>
<script type="text/javascript" src="../core/FancyUpload/Fx.ProgressBar.js"></script>
<script type="text/javascript" src="../core/FancyUpload/FancyUpload2.js"></script>
{literal}
<script type="text/javascript">
window.addEvent('load', function() {
 
	var swiffy = new FancyUpload2($('status'), $('images-list'), {
		'url': $('form_imagens').action,
		'fieldName': 'photoupload',
		'limitFiles': 20,
		'path': '../core/FancyUpload/Swiff.Uploader.swf',
		'onLoad': function() {
			$('loading').destroy();
			$('status').removeClass('hide');
		}
	});
 
	/**
	 * Various interactions
	 */
 
	$('add-image').addEvent('click', function() {
		swiffy.browse({'Images (*.jpg, *.jpeg, *.gif, *.png)': '*.jpg; *.jpeg; *.gif; *.png'});
		return false;
	});
 
	$('clear-list').addEvent('click', function() {
		swiffy.removeFile();
		return false;
	});
 
	$('upload-images').addEvent('click', function() {
		swiffy.upload();
		return false;
	});
 
});
</script>

<style type="text/css">
#status
{
	background-color:		#F5E31D;
	padding:				10px 15px;
	width:					420px;
}
 
#status .progress
{
	background:				white url(../core/FancyUpload/assets/progress.gif) no-repeat;
	background-position:	+50% 0;
	margin-right:			0.5em;
}
 
#status .progress-text
{
	font-size:				0.9em;
	font-weight:			bold;
}
 
#images-list
{
	list-style:				none;
	width:					450px;
	margin:					0;
}
 
#images-list li.file
{
	border-bottom:			1px solid #FFFE85;
	background:				#FFF048 url(../core/FancyUpload/assets/file.png) no-repeat 4px 4px;
}
#images-list li.file.file-uploading
{
	background-image:		url(../core/FancyUpload/assets/uploading.gif);
	background-color:		#D9DDE9;
}
#images-list li.file.file-success
{
	background-image:		url(../core/FancyUpload/assets/success.png);
}
#images-list li.file.file-failed
{
	background-image:		url(../core/FancyUpload/assets/failed.png);
}
 
#images-list li.file .file-name
{
	font-size:				1.2em;
	margin-left:			60px;
	display:				block;
	clear:					left;
	line-height:			40px;
	height:					56px;
	font-weight:			bold;
}
#images-list li.file .file-size
{
	font-size:				0.9em;
	line-height:			18px;
	float:					right;
	margin-top:				2px;
	margin-right:			6px;
}
#images-list li.file .file-info
{
	display:				block;
	margin-left:			44px;
	font-size:				0.9em;
	line-height:			20px;
	clear
}
#images-list li.file .file-remove
{
	clear:					right;
	float:					right;
	line-height:			18px;
	margin-right:			6px;
}

.hide {
	display: none;
}

#loading {
	background-color:		#FFF048;
	padding:				30px;
	width:					420px;
	text-align: 			center;
}

#loading img {
	vertical-align: middle;
}
</style>
{/literal}

<h2>Enviar Imagens</h2>

<p style="text-align: center;">
	<a href="?src=imagens&p=lista&gal={$galeria.gal_codigo}">Voltar à galeria</a>
</p>

<form action="?src=imagens&p=enviar_action&SESSID={$sessid}&gal={$galeria.gal_codigo}&f={$galeria.gal_pasta}" method="post" enctype="multipart/form-data" id="form_imagens">
	<div id="loading">
		<img src="../core/FancyUpload/assets/uploading.gif" alt="" /> Carregando...
	</div>
	
	<div id="status" class="hide">
		<p>
			<a href="#" id="add-image">Adicionar</a> |
			<a href="#" id="clear-list">Limpar Lista</a> |
			<a href="#" id="upload-images">Enviar</a>
		</p>
		<div>
			<strong class="overall-title">Progresso Total</strong><br />
			<img src="../core/FancyUpload/assets/bar.gif" class="progress overall-progress" />
		</div>
		<div>
			<strong class="current-title">Arquivo atual</strong><br />
			<img src="../core/FancyUpload/assets/bar.gif" class="progress current-progress" />
		</div>
		<div class="current-text"></div>
	</div>
 
	<ul id="images-list"></ul>
 
</form>

<p style="text-align: center;">
	<a href="?src=imagens&p=lista&gal={$galeria.gal_codigo}">Voltar à galeria</a>
</p>